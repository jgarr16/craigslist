<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Craigslist Washer & Dryer Gallery</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="my-favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="my-favicon/favicon.svg" />
    <link rel="shortcut icon" href="my-favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="my-favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Fauxlist" />
    <link rel="manifest" href="my-favicon/site.webmanifest" />
</head>
<body>
    <header>
        <h1>Fauxlist</h1>
    </header>

    <main>
        <div class="filter-buttons">
            <!-- Buttons will be dynamically generated -->
        </div>

        <div class="gallery">
            <!-- Gallery items will be dynamically generated from gallery-data.json -->
        </div>
    </main>

    <footer>
        <p>&copy; 2026 Fauxlist Gallery</p>
    </footer>

    <script>
        // Load gallery data and dynamically generate everything
        const galleryContainer = document.querySelector('.gallery');
        const filterButtonsContainer = document.querySelector('.filter-buttons');
        let allGalleryItems = [];

        // Fetch gallery data
        fetch('gallery-data.json')
            .then(response => response.json())
            .then(galleryData => {
                // Generate gallery items
                galleryData.forEach(item => {
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item show';
                    galleryItem.setAttribute('data-category', item.category);

                    const img = document.createElement('img');
                    img.src = `images/${item.filename}`;
                    img.alt = item.alt;

                    galleryItem.appendChild(img);
                    galleryContainer.appendChild(galleryItem);
                });

                allGalleryItems = document.querySelectorAll('.gallery-item');

                // Get unique categories
                const categories = new Set();
                galleryData.forEach(item => {
                    categories.add(item.category);
                });

                // Create "All" button
                const allButton = document.createElement('button');
                allButton.className = 'filter-btn active';
                allButton.setAttribute('data-filter', 'all');
                allButton.textContent = 'All';
                filterButtonsContainer.appendChild(allButton);

                // Create buttons for each category
                categories.forEach(category => {
                    const button = document.createElement('button');
                    button.className = 'filter-btn';
                    button.setAttribute('data-filter', category);
                    // Convert "washer_dryer" to "Washer Dryer" for display
                    button.textContent = category.split('_').map(word =>
                        word.charAt(0).toUpperCase() + word.slice(1)
                    ).join(' ');
                    filterButtonsContainer.appendChild(button);
                });

                // Set up filter functionality
                const filterButtons = document.querySelectorAll('.filter-btn');

                filterButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const filterValue = button.getAttribute('data-filter');

                        // Update active button
                        filterButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');

                        // Filter gallery items
                        allGalleryItems.forEach(item => {
                            const category = item.getAttribute('data-category');

                            if (filterValue === 'all' || category === filterValue) {
                                item.style.display = 'block';
                                setTimeout(() => item.classList.add('show'), 10);
                            } else {
                                item.classList.remove('show');
                                setTimeout(() => item.style.display = 'none', 300);
                            }
                        });
                    });
                });
            })
            .catch(error => {
                console.error('Error loading gallery data:', error);
                galleryContainer.innerHTML = '<p style="text-align: center; padding: 2rem;">Error loading gallery. Please run generate-gallery.js script.</p>';
            });
    </script>
</body>
</html>
